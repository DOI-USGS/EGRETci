<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>WRTDSKalman Bootstrapping — genDailyBoot • EGRETci</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="WRTDSKalman Bootstrapping — genDailyBoot" />
<meta property="og:description" content="Function to get multiple bootstrap replicates at a daily time step using the WRTDS_K
method.  It is done by doing bootstrap resampling of the original Sample data frame.
The number of these replicate samples that are created is called nBoot and in each
case the WRTDS model is estimated.  Then, for each of these models, there are
nKalman time series of daily values computed, using all of the sample values in
the original Sample data frame.  The total number of replicates of the complete
process is nBoot * nKalman.  For example we might generate 500 replicates by setting
nBoot = 20 and nKalman = 25." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-53797708-7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-53797708-7');
</script>


  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EGRETci</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/EGRETci.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Function Help Pages</a>
</li>
<li>
  <a href="../articles/Enhancements.html">Enhancements</a>
</li>
<li>
  <a href="../articles/prediction.html">WRTDS Kalman Prediction Intervals</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/USGS-R/EGRETci">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>WRTDSKalman Bootstrapping</h1>
    <small class="dont-index">Source: <a href='https://github.com/USGS-R/EGRETci/blob/master/R/kalman_bootstrapping.R'><code>R/kalman_bootstrapping.R</code></a></small>
    <div class="hidden name"><code>kalman.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to get multiple bootstrap replicates at a daily time step using the WRTDS_K
method.  It is done by doing bootstrap resampling of the original Sample data frame.
The number of these replicate samples that are created is called nBoot and in each
case the WRTDS model is estimated.  Then, for each of these models, there are
nKalman time series of daily values computed, using all of the sample values in
the original Sample data frame.  The total number of replicates of the complete
process is nBoot * nKalman.  For example we might generate 500 replicates by setting
nBoot = 20 and nKalman = 25.</p>
    </div>

    <pre class="usage"><span class='fu'>genDailyBoot</span><span class='op'>(</span><span class='va'>eList</span>, nBoot <span class='op'>=</span> <span class='fl'>10</span>, nKalman <span class='op'>=</span> <span class='fl'>10</span>, rho <span class='op'>=</span> <span class='fl'>0.9</span>, setSeed <span class='op'>=</span> <span class='cn'>NA</span>,
  jitterOn <span class='op'>=</span> <span class='cn'>FALSE</span>, V <span class='op'>=</span> <span class='fl'>0.2</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>eList</th>
      <td><p>is the data with a fitted model already done. Note that the eList$Sample 
may have multiple values on a given day and it can also have censored values.</p></td>
    </tr>
    <tr>
      <th>nBoot</th>
      <td><p>number of times the bootstrap resampling and model estimating is done.</p></td>
    </tr>
    <tr>
      <th>nKalman</th>
      <td><p>number of different realizations of the daily time series for each re-estimated model.</p></td>
    </tr>
    <tr>
      <th>rho</th>
      <td><p>numeric the lag one autocorrelation. Default is 0.9.</p></td>
    </tr>
    <tr>
      <th>setSeed</th>
      <td><p>value. Defaults is <code>NA</code>, which will not specify a randomized seed.
This can be used to make repeatable output.</p></td>
    </tr>
    <tr>
      <th>jitterOn</th>
      <td><p>logical, if TRUE, adds "jitter" to the data in an attempt to avoid some numerical problems.  Default = FALSE.  See Details below.</p></td>
    </tr>
    <tr>
      <th>V</th>
      <td><p>numeric a multiplier for addition of jitter to the data, default = 0.2.  See Details below.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>dailyBootOut a matrix of daily flux values (in kg/day).  
The number of columns of the matrix is the number of replicates produced
which is nBoot * nKalman
The number of rows is the number of days in the record.  
The set of days simulated is the same set of days that are in the eList$Daily data frame.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>In some situations numerical problems are encountered in the bootstrap process, resulting in highly unreasonable spikes in the confidence intervals.
The use of "jitter" can often prevent these problems, but should only be used when it is clearly needed.
It adds a small amount of random "jitter" to the explanatory variables of the WRTDS model.  The V parameter sets the scale of variation in the log discharge values.
The standard deviation of the added jitter is V * standard deviation of Log Q.
The default for V is 0.2.  Larger values should generally be avoided, and smaller values may be sufficient.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='va'>eList</span> <span class='op'>&lt;-</span> <span class='fu'>EGRET</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/EGRET/man/sampleData.html'>Choptank_eList</a></span>
<span class='co'># \donttest{</span>
<span class='va'>dailyBootOut</span> <span class='op'>&lt;-</span> <span class='fu'>genDailyBoot</span><span class='op'>(</span><span class='va'>eList</span>, nBoot <span class='op'>=</span> <span class='fl'>2</span>, nKalman <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Boot: 1</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>There are 253 duplicated Sample dates.</span></div><div class='output co'>#&gt; <span class='message'>made surfaces from boot sample1replicate</span></div><div class='output co'>#&gt; <span class='message'>     - Kalman index: 1</span></div><div class='output co'>#&gt; <span class='message'>     - Kalman index: 2</span></div><div class='output co'>#&gt; <span class='message'>Boot: 2</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>There are 236 duplicated Sample dates.</span></div><div class='output co'>#&gt; <span class='message'>made surfaces from boot sample2replicate</span></div><div class='output co'>#&gt; <span class='message'>     - Kalman index: 1</span></div><div class='output co'>#&gt; <span class='message'>     - Kalman index: 2</span></div><div class='input'><span class='co'># }</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Laura DeCicco, Robert Hirsch.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9000.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


