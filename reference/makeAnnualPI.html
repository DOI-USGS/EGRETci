<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function takes the output from genDailyBoot and 
calculates the quantiles for an annual (based on paStart/paLong) aggregation. 
This means that the function can be used for seasons."><title>Make Annual Prediction Intervals — makeAnnualPI • EGRETci</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Make Annual Prediction Intervals — makeAnnualPI"><meta property="og:description" content="This function takes the output from genDailyBoot and 
calculates the quantiles for an annual (based on paStart/paLong) aggregation. 
This means that the function can be used for seasons."><meta property="og:image" content="http://usgs-r.github.io/EGRETci/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-53797708-7"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-53797708-7');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://www.usgs.gov/" class="external-link"><img src="logo.png" id="logo" alt="Home" style="padding: 0px 50px 0px 0px;"></a>
    <a class="navbar-brand me-2" href="../index.html">EGRETci</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.4.0002</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/EGRETci.html">Introduction</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Function Help Pages</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/Enhancements.html">Enhancements</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/prediction.html">WRTDS Kalman Prediction Intervals</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://code.usgs.gov/water/EGRETci">
    <span class="fa fa-gitlab fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Make Annual Prediction Intervals</h1>
      <small class="dont-index">Source: <a href="https://github.com/USGS-R/EGRETci/blob/HEAD/R/predictionIntervals.R" class="external-link"><code>R/predictionIntervals.R</code></a></small>
      <div class="d-none name"><code>makeAnnualPI.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function takes the output from <code><a href="kalman.html">genDailyBoot</a></code> and 
calculates the quantiles for an annual (based on paStart/paLong) aggregation. 
This means that the function can be used for seasons.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">makeAnnualPI</span><span class="op">(</span><span class="va">dailyBootOut</span>, <span class="va">eList</span>, paLong <span class="op">=</span> <span class="fl">12</span>, paStart <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  fluxUnit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dailyBootOut</dt>
<dd><p>data frame returned from <code><a href="kalman.html">genDailyBoot</a></code></p></dd>


<dt>eList</dt>
<dd><p>named list with at least the Daily, Sample, and INFO 
dataframes. Created from the EGRET package, after running <code><a href="https://rdrr.io/pkg/EGRET/man/modelEstimation.html" class="external-link">modelEstimation</a></code>.</p></dd>


<dt>paLong</dt>
<dd><p>numeric integer specifying the length of the period of analysis, in months, 1&lt;=paLong&lt;=12, default is 12</p></dd>


<dt>paStart</dt>
<dd><p>numeric integer specifying the starting month for the period of analysis, 1&lt;=paStart&lt;=12, default is 10</p></dd>


<dt>fluxUnit</dt>
<dd><p>number representing entry in pre-defined fluxUnit class array. 
<code><a href="https://rdrr.io/pkg/EGRET/man/printFluxUnitCheatSheet.html" class="external-link">printFluxUnitCheatSheet</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a list of 2 data frames, one for average concentration, in mg/L
and one for flux (unit depends on fluxUnit argument)
In each data frame the first column is DecYear. The remaining columns are
quantiles of the flux or concentration (depending on the data frame).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">eList</span> <span class="op">&lt;-</span> <span class="fu">EGRET</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/EGRET/man/sampleData.html" class="external-link">Choptank_eList</a></span></span></span>
<span class="r-in"><span><span class="co"># This example is only based on 4 iterations</span></span></span>
<span class="r-in"><span><span class="co"># Actual prediction intervals should be calculated on</span></span></span>
<span class="r-in"><span><span class="co"># a much larger number of iterations (several hundred).  </span></span></span>
<span class="r-in"><span><span class="va">dailyBoot</span> <span class="op">&lt;-</span> <span class="va">Choptank_dailyBootOut</span></span></span>
<span class="r-in"><span><span class="va">annualPcts</span> <span class="op">&lt;-</span> <span class="fu">makeAnnualPI</span><span class="op">(</span><span class="va">dailyBoot</span>, <span class="va">eList</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">annualPcts</span><span class="op">[[</span><span class="st">"flux"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    DecYear       p1     p2.5       p5      p10      p25      p50      p75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1980.249 300.2398 300.2398 301.8455 307.1477 309.4482 317.7999 330.2232</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1981.249 153.7898 153.7898 153.9703 158.7941 164.4680 168.8981 175.3665</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1982.249 262.1990 262.1990 263.3815 268.0285 274.5739 288.0483 296.1632</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 1983.249 323.4122 323.4122 324.8703 332.7810 351.4329 360.9021 369.6140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 1984.249 387.9003 387.9003 396.3133 417.9942 426.2565 434.0034 446.7875</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 1985.249 120.6924 120.6924 120.9460 122.3459 123.9973 126.8312 131.8363</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        p90      p95    p97.5      p99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 347.9412 353.3627 354.7580 354.7580</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 179.5756 181.7312 182.0641 182.0641</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 304.9160 307.9942 308.3691 308.3691</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 385.3095 393.8460 394.9293 394.9293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 458.4162 461.3039 461.9950 461.9950</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 136.5073 139.2032 139.6815 139.6815</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">annualPcts</span><span class="op">[[</span><span class="st">"conc"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    DecYear        p1      p2.5        p5       p10       p25       p50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1980.249 0.8943015 0.8943015 0.9002018 0.9160820 0.9359561 0.9669431</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1981.249 0.9118777 0.9118777 0.9142081 0.9255707 0.9462244 0.9693073</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1982.249 1.0132666 1.0132666 1.0154235 1.0225617 1.0430828 1.0774149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 1983.249 0.9298767 0.9298767 0.9345345 0.9510482 0.9844741 1.0125638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 1984.249 0.9474285 0.9474285 0.9475826 0.9493554 0.9627001 0.9869344</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 1985.249 0.9712238 0.9712238 0.9737614 0.9810472 0.9995361 1.0212897</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         p75      p90      p95    p97.5      p99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.9980734 1.048386 1.075781 1.085602 1.085602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1.0075477 1.028927 1.041497 1.042789 1.042789</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1.1230733 1.138615 1.142896 1.143837 1.143837</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 1.0489304 1.081274 1.083430 1.083898 1.083898</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 1.0215825 1.039515 1.042340 1.043366 1.043366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 1.0640089 1.101643 1.115537 1.120401 1.120401</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer></footer></div> <!-- / div for your main content-->

<!-- BEGIN USGS Footer Template -->

<footer class="footer"><div class="tmp-container">
		<!-- .footer-wrap -->
			<!-- .footer-doi -->
			<div class="footer-doi">
				<!-- footer nav links -->
				<ul class="menu nav"><li class="first leaf menu-links menu-level-1"><a href="https://www.doi.gov/privacy" class="external-link">DOI Privacy Policy</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/policies-and-notices" class="external-link">Legal</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/accessibility-and-us-geological-survey" class="external-link">Accessibility</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/sitemap" class="external-link">Site Map</a></li>
					<li class="last leaf menu-links menu-level-1"><a href="https://answers.usgs.gov/" class="external-link">Contact USGS</a></li>
				</ul><!--/ footer nav links --></div>
			<!-- /.footer-doi -->

			<hr><!-- .footer-utl-links --><div class="footer-doi">
			<ul class="menu nav"><li class="first leaf menu-links menu-level-1"><a href="https://www.doi.gov/" class="external-link">U.S. Department of the Interior</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.doioig.gov/" class="external-link">DOI Inspector General</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.whitehouse.gov/" class="external-link">White House</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.whitehouse.gov/omb/management/egov/" class="external-link">E-gov</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.doi.gov/pmb/eeo/no-fear-act" class="external-link">No Fear Act</a></li>
				<li class="last leaf menu-links menu-level-1"><a href="https://www.usgs.gov/about/organization/science-support/foia" class="external-link">FOIA</a></li>
			</ul></div>			
		<!-- /.footer-utl-links -->
		<!-- .footer-social-links -->
		<div class="footer-social-links">
			<ul class="social"><li class="follow">Follow</li>
				<li class="twitter">
					<a href="https://twitter.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-twitter-square"><span class="only">Twitter</span></i>
					</a>
				</li>
				<li class="facebook">
					<a href="https://facebook.com/usgeologicalsurvey" target="_blank" class="external-link">
						<i class="fa fa-facebook-square"><span class="only">Facebook</span></i>
					</a>
				</li>
				<li class="github">
					<a href="https://github.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-github"><span class="only">GitHub</span></i>
					</a>
				</li>
				<li class="flickr">
					<a href="https://flickr.com/usgeologicalsurvey" target="_blank" class="external-link">
						<i class="fa fa-flickr"><span class="only">Flickr</span></i>
					</a>
				</li>
				<li class="youtube">
					<a href="http://youtube.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-youtube-play"><span class="only">YouTube</span></i>
					</a>
				</li>
				<li class="instagram">
					<a href="https://instagram.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-instagram"><span class="only">Instagram</span></i>
					</a>
				</li>
			</ul></div>
		<!-- /.footer-social-links -->
	</div>
		<!-- /.footer-wrap -->	
</footer><!-- END USGS Footer Template- --><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKQR8KP" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  
  </body><!-- closing div for body --></html>

